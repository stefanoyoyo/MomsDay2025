<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auguri Mamma ‚ù§Ô∏è</title>
    <link rel="preload" as="image" href="assets/foto1.jpg" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@300&display=swap"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        overflow: hidden;
        font-family: "Roboto", sans-serif;
        background: linear-gradient(to bottom, #fff0f5, #ffe4e1);
      }
      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #fff0f5;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2em;
        color: #e91e63;
        font-family: "Great Vibes", cursive;
        z-index: 9999;
      }
      .section {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        transition: transform 0.5s ease;
        background-color: rgba(255, 255, 255, 0.85);
        padding: 2em;
        text-align: center;
        border-radius: 30px;
        margin: 1em;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }
      .section h1 {
        font-family: "Great Vibes", cursive;
        font-size: 3.5em;
        color: #e91e63;
        padding: 1em;
        line-height: 1.4;
      }
      .section .content {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
      }
      #indicator {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        z-index: 1000;
      }
      .dot {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        border: 2px solid #e91e63;
        margin: 0 6px;
        background-color: white;
        transition: background-color 0.3s, transform 0.3s;
      }
      .dot.active {
        background-color: #e91e63;
        transform: scale(1.2);
      }
      .line {
        height: 2px;
        width: 40px;
        background-color: #e91e63;
      }
      .slideshow img,
      .slideshow video {
        max-width: 85vw;
        max-height: 75vh;
        border-radius: 20px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.25);
        margin-top: 1em;
      }
      .terminal img {
        max-width: 80vw;
        max-height: 75vh;
        border-radius: 25px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.25);
      }
      img {
        border: 4px solid #f8bbd0;
        max-width: 100%;
        max-height: 100%;
      }
      audio {
        display: none;
      }
      #timer-bar {
        position: fixed;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(233, 30, 99, 0.8);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-weight: bold;
        z-index: 1000;
      }
      #pause-btn {
        position: fixed;
        top: 90px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1000;
        background-color: #e91e63;
        color: white;
        border: none;
        border-radius: 20px;
        padding: 6px 14px;
        font-size: 1em;
        cursor: pointer;
        font-weight: bold;
      }

      /* Media Query per dispositivi mobili */
      @media only screen and (max-width: 768px) {
        .section {
          margin: 0.5em;
          padding: 1em;
        }
        .section h1 {
          font-size: 2.5em;
          padding: 0.5em;
        }
        img {
          max-width: 90vw;
          height: auto;
        }
        #indicator {
          top: 5px;
        }
        #timer-bar {
          top: 40px;
          padding: 4px 8px;
          font-size: 0.9em;
        }
        #pause-btn {
          top: 80px;
          padding: 4px 10px;
          font-size: 0.9em;
        }
        #loader {
          font-size: 1.5em;
        }
      }
    </style>
  </head>
  <body>
    <div id="loader">Caricamento in corso...</div>

    <audio autoplay loop>
      <source src="assets/musica.mp3" type="audio/mpeg" />
    </audio>

    <div id="indicator">
      <div class="dot" data-index="0"></div>
      <div class="line"></div>
      <div class="dot" data-index="1"></div>
      <div class="line"></div>
      <div class="dot" data-index="2"></div>
      <div class="line"></div>
      <div class="dot" data-index="3"></div>
    </div>

    <div id="timer-bar">
      Prossima sezione in: <span id="timer">6</span>s
    </div>
    <button id="pause-btn">‚è∏ Pausa</button>

    <div id="container">
      <div class="section" id="section1">
        <div class="content">
          <h1>Auguri Mamma! ‚ù§Ô∏è</h1>
          <img
            src="https://1drv.ms/i/c/f343ed142930869c/IQT4KDmKi98gS7gqpI8ZalIVAQvBkWM7yeeQpEhJA3yrfSA?width=921&height=2048"
            alt="Mamma"
            style="max-width: 60%; border-radius: 20px"
          />
        </div>
      </div>
      <div class="section" id="section2">
        <div class="content">
          <h1>
            Un grazie di cuore<br />per tutto quello che hai fatto,<br />fai e
            farai per noi,<br />con amore infinito üíñ
          </h1>
          <img
            src="https://1drv.ms/i/c/f343ed142930869c/IQRx0reEkO-aS4-Gl_nIUoMXAc-wU4FZLStbJUbt1fb5IGE?width=1024"
            alt="Famiglia"
            style="max-width: 60%; border-radius: 20px"
          />
        </div>
      </div>
      <div class="section" id="section3">
        <div class="content">
          <h1>Un po' di immagini ora..</h1>
          <div class="slideshow">
            <img src="assets/foto3.jpg" alt="Ricordi" id="slideshow-img" />
          </div>
        </div>
      </div>
      <div class="section terminal" id="section4">
        <div class="content">
          <h1>
            Ti vogliamo bene! üíê<br />Ogni ricordo con te √® un dono üéÅ
          </h1>
          <img
            src="https://1drv.ms/i/c/f343ed142930869c/IQQohP8kNrYBSorkb-oJW6x7AfD0KgFeVoywDHvVWyJ9VrA?width=1365&height=2048"
            alt="Finale"
          />
        </div>
      </div>
    </div>

    <script>
      const loader = document.getElementById("loader");
      const sections = document.querySelectorAll(".section");
      const container = document.getElementById("container");
      const dots = document.querySelectorAll(".dot");
      const timerDisplay = document.getElementById("timer");
      const pauseBtn = document.getElementById("pause-btn");

      let currentIndex = 0;
      let intervalDuration = 60; // durata in secondi
      let countdown = intervalDuration;
      let autoScrollInterval;
      let countdownInterval;
      let isPaused = false;

      function updateView() {
        container.style.transform = `translateY(-${currentIndex * 100}vh)`;
        dots.forEach((dot) => dot.classList.remove("active"));
        dots[currentIndex].classList.add("active");
      }

      function goToNextSection() {
        if (!isPaused) {
          currentIndex = (currentIndex + 1) % sections.length;
          updateView();
        }
        countdown = intervalDuration;
      }

      function resetTimers() {
        clearInterval(autoScrollInterval);
        clearInterval(countdownInterval);
        if (!isPaused) {
          autoScrollInterval = setInterval(
            goToNextSection,
            intervalDuration * 1000
          );
          countdownInterval = setInterval(() => {
            if (!isPaused) {
              countdown--;
              timerDisplay.textContent = countdown;
            }
          }, 1000);
        }
      }

      pauseBtn.addEventListener("click", () => {
        isPaused = !isPaused;
        pauseBtn.textContent = isPaused ? "‚ñ∂ Riprendi" : "‚è∏ Pausa";
        resetTimers();
      });

      document.addEventListener("wheel", (e) => {
        if (e.deltaY > 0 && currentIndex < sections.length - 1) currentIndex++;
        else if (e.deltaY < 0 && currentIndex > 0) currentIndex--;
        updateView();
        countdown = intervalDuration;
        resetTimers();
      });

      let touchStartY = null;
      document.addEventListener("touchstart", (e) => {
        touchStartY = e.touches[0].clientY;
      });
      document.addEventListener("touchend", (e) => {
        const touchEndY = e.changedTouches[0].clientY;
        if (touchStartY - touchEndY > 50 && currentIndex < sections.length - 1)
          currentIndex++;
        else if (touchEndY - touchStartY > 50 && currentIndex > 0)
          currentIndex--;
        updateView();
        countdown = intervalDuration;
        resetTimers();
      });

      // Logica slideshow
      const slideshowImages = [
        "https://1drv.ms/i/c/f343ed142930869c/IQRx0reEkO-aS4-Gl_nIUoMXAc-wU4FZLStbJUbt1fb5IGE?width=4000&height=1848",
        "https://1drv.ms/i/c/f343ed142930869c/IQRDLBCwKVcoRaS9aAWoNIRzAfMWhV7DY-JZjOayPt2h89U?width=958&height=1280",
        "https://1drv.ms/i/c/f343ed142930869c/IQSe7FjF326vQr6507vvBU29ASw8nOg8JjrYhKzJJNjxBCU?width=921&height=2048",
        "https://1drv.ms/i/c/f343ed142930869c/IQSfMPwy9IQ7QLwgt_nqOaEmAVdmvsy2QxJ2v62VgDOTEpI?width=720&height=1600",
      ];
      let slideshowIndex = 0;
      const slideshowImg = document.getElementById("slideshow-img");
      setInterval(() => {
        slideshowIndex = (slideshowIndex + 1) % slideshowImages.length;
        slideshowImg.src = slideshowImages[slideshowIndex];
      }, 10000);

      // Avvio con loader
      window.addEventListener("load", () => {
        setTimeout(() => {
          loader.style.display = "none";
          updateView();
          resetTimers();
        }, 3000);
      });
    </script>
  </body>
</html>
